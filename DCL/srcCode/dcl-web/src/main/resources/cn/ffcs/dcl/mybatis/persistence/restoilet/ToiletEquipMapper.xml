<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.ffcs.dcl.mybatis.persistence.restoilet.ToiletEquipMapper">
	<resultMap id="BaseResultMap" type="cn.ffcs.dcl.mybatis.domain.restoilet.ToiletEquip">
		<id column="RES_TOILET_EQUIP_ID" property="resToiletEquipId" jdbcType="DECIMAL" /> <!--厕所ID-->
		<result column="TRUCK_NUM" property="truckNum" jdbcType="DECIMAL" /> <!--村级配备吸污车数量（辆）（填写，单位为“辆”）-->
		<result column="PUMP_NUM" property="pumpNum" jdbcType="DECIMAL" /> <!--村级配备吸污泵数量（个）（填写，单位为“个”）-->
		<result column="OTHER_FACIL" property="otherFacil" jdbcType="VARCHAR" /> <!--村级配备其他设施（列举名称及数量）（填写）-->
		<result column="IS_PROFESS_TEAM" property="isProfessTeam" jdbcType="VARCHAR" /> <!--是否有专业维护队伍-->
		<result column="TERM_USER_NUM" property="termUserNum" jdbcType="DECIMAL" /> <!--维护队伍人数（人）（填写，单位为“人”）-->
		<result column="IS_FUNDS" property="isFunds" jdbcType="VARCHAR" /> <!--是否有维护经费（单选）-->
		<result column="YEAR_FUNDS" property="yearFunds" jdbcType="DECIMAL" /> <!--年度维护经费（元）（填写，单位为“元”）-->
		<result column="FILLING_DATE" property="fillingDate" jdbcType="TIMESTAMP" /> <!--填表日期（填写，限定日期格式输入）-->
		<result column="FILLING_USER" property="fillingUser" jdbcType="VARCHAR" /> <!--填表人（填写）-->
		<result column="MOBILE_PHONE" property="mobilePhone" jdbcType="VARCHAR" /> <!--联系电话（填写，校验11位阿拉伯数字输入）-->
		<result column="IS_VALID" property="isValid" jdbcType="VARCHAR" /> <!--是否有效-->
		<result column="CREATOR" property="creator" jdbcType="DECIMAL" /> <!--创建人-->
		<result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" /> <!--创建人时间-->
		<result column="UPDATOR" property="updator" jdbcType="DECIMAL" /> <!--修改人-->
		<result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" /> <!--修改时间-->
		<result column="UUID" property="uuid" jdbcType="VARCHAR" /> <!--UUID-->
		<result column="RE_ORG_CODE" property="reOrgCode" jdbcType="VARCHAR" /> <!--所属区域编码-->
		<result column="REGION_NAME" property="regionName" jdbcType="VARCHAR" /> <!--所属区域名称-->
		<result column="ORG_CODE" property="orgCode" jdbcType="VARCHAR" /> <!--组织编码-->
		<result column="WCNUM" property="wcNum" jdbcType="DECIMAL" /> <!--公厕数量-->
		<result column="TOILET_NUM" property="toiletNum" jdbcType="DECIMAL" /> <!--已建公厕数量（座）-->
		<result column="DS" property="ds" jdbcType="VARCHAR" /> <!--地市-->
		<result column="XQ" property="xq" jdbcType="VARCHAR" /> <!--县区-->
		<result column="XZ" property="xz" jdbcType="VARCHAR" /> <!--乡镇-->
		<result column="CSQ" property="csq" jdbcType="VARCHAR" /> <!--村社区-->
	</resultMap>

	<!-- 列表（总数） -->
	<select id="countList"  resultType="java.lang.Long">
		SELECT COUNT(1) FROM T_RES_TOILET_EQUIP T
		<include refid="find_where" />
	</select>

	<!-- 列表（分页） -->
	<select id="searchList"  resultMap="BaseResultMap">
		SELECT
		T.TRUCK_NUM,
		T.PUMP_NUM,
		T.OTHER_FACIL,
		T.IS_PROFESS_TEAM,
		T.TERM_USER_NUM,
		T.IS_FUNDS,
		T.YEAR_FUNDS,
		T.FILLING_DATE,
		T.FILLING_USER,
		T.MOBILE_PHONE,
		T.IS_VALID,
		T.CREATOR,
		T.CREATE_TIME,
		T.UPDATOR,
		T.UPDATE_TIME,
		T.UUID,
		T.RE_ORG_CODE,
		T.REGION_NAME,
		T.ORG_CODE,
		T.TOILET_NUM
		FROM
		T_RES_TOILET_EQUIP T
		<include refid="find_where" />
		ORDER BY
		T.UUID DESC
	</select>

	<!-- 列表（条件） -->
	<sql id="find_where">
		<where>
			T.IS_VALID='1'
			<if test="uuid != null and uuid != ''" >
				<![CDATA[ AND T.UUID = #{uuid,jdbcType=VARCHAR} ]]>
			</if>
			<if test="reOrgCode != null and reOrgCode != ''" >
				<![CDATA[ AND T.RE_ORG_CODE LIKE #{reOrgCode,jdbcType=VARCHAR}||'%' ]]>
			</if>
		</where>
	</sql>

	<!-- 新增 -->
	<insert id="insert" parameterType="cn.ffcs.dcl.mybatis.domain.restoilet.ToiletEquip">
		<selectKey keyProperty="resToiletEquipId" resultType="long" order="BEFORE">
			SELECT SEQ_T_RES_TOILET_EQUIP.NEXTVAL FROM DUAL
		</selectKey>
		INSERT INTO
		T_RES_TOILET_EQUIP
		(
		RES_TOILET_EQUIP_ID,
		TRUCK_NUM,
		PUMP_NUM,
		OTHER_FACIL,
		IS_PROFESS_TEAM,
		TERM_USER_NUM,
		IS_FUNDS,
		YEAR_FUNDS,
		FILLING_DATE,
		FILLING_USER,
		MOBILE_PHONE,
		IS_VALID,
		CREATOR,
		CREATE_TIME,
		UPDATOR,
		UPDATE_TIME,
		UUID,
		RE_ORG_CODE,
		REGION_NAME,
		ORG_CODE,
		TOILET_NUM
		) VALUES (
		#{resToiletEquipId,jdbcType=DECIMAL},
		#{truckNum,jdbcType=DECIMAL},
		#{pumpNum,jdbcType=DECIMAL},
		#{otherFacil,jdbcType=VARCHAR},
		#{isProfessTeam,jdbcType=VARCHAR},
		#{termUserNum,jdbcType=DECIMAL},
		#{isFunds,jdbcType=VARCHAR},
		#{yearFunds,jdbcType=DECIMAL},
		#{fillingDate,jdbcType=TIMESTAMP},
		#{fillingUser,jdbcType=VARCHAR},
		#{mobilePhone,jdbcType=VARCHAR},
		'1',
		#{creator,jdbcType=DECIMAL},
		sysdate,
		#{updator,jdbcType=DECIMAL},
		sysdate,
		SYS_GUID(),
		#{reOrgCode,jdbcType=VARCHAR},
		#{regionName,jdbcType=VARCHAR},
		#{orgCode,jdbcType=VARCHAR},
		#{toiletNum,jdbcType=VARCHAR}
		)
	</insert>

	<!-- 修改 -->
	<update id="update" parameterType="cn.ffcs.dcl.mybatis.domain.restoilet.ToiletEquip">
		UPDATE
		T_RES_TOILET_EQUIP
		<set>
			<if test="truckNum != null " >
				TRUCK_NUM=#{truckNum,jdbcType=DECIMAL},
			</if>
			<if test="pumpNum != null " >
				PUMP_NUM=#{pumpNum,jdbcType=DECIMAL},
			</if>
			<if test="otherFacil != null " >
				OTHER_FACIL=#{otherFacil,jdbcType=VARCHAR},
			</if>
			<if test="isProfessTeam != null " >
				IS_PROFESS_TEAM=#{isProfessTeam,jdbcType=VARCHAR},
			</if>
			<if test="termUserNum != null " >
				TERM_USER_NUM=#{termUserNum,jdbcType=DECIMAL},
			</if>
			<if test="isFunds != null " >
				IS_FUNDS=#{isFunds,jdbcType=VARCHAR},
			</if>
			<if test="yearFunds != null " >
				YEAR_FUNDS=#{yearFunds,jdbcType=DECIMAL},
			</if>
			<if test="fillingDate != null " >
				FILLING_DATE=#{fillingDate,jdbcType=TIMESTAMP},
			</if>
			<if test="fillingUser != null " >
				FILLING_USER=#{fillingUser,jdbcType=VARCHAR},
			</if>
			<if test="mobilePhone != null " >
				MOBILE_PHONE=#{mobilePhone,jdbcType=VARCHAR},
			</if>
			<if test="isValid != null " >
				IS_VALID=#{isValid,jdbcType=VARCHAR},
			</if>
			<if test="updator != null " >
				UPDATOR=#{updator,jdbcType=DECIMAL},
			</if>
			<if test="uuid != null " >
				UUID=#{uuid,jdbcType=VARCHAR},
			</if>
			<if test="reOrgCode != null " >
				RE_ORG_CODE=#{reOrgCode,jdbcType=VARCHAR},
			</if>
			<if test="regionName != null " >
				REGION_NAME=#{regionName,jdbcType=VARCHAR},
			</if>
			<if test="orgCode != null " >
				ORG_CODE=#{orgCode,jdbcType=VARCHAR},
			</if>
			<if test="toiletNum != null " >
				TOILET_NUM=#{toiletNum,jdbcType=DECIMAL},
			</if>
			UPDATE_TIME = sysdate
		</set>
		WHERE
		UUID= #{uuid,jdbcType=VARCHAR}
	</update>

	<!-- 详情 -->
	<select id="searchById" parameterType="java.lang.String"  resultMap="BaseResultMap">
		SELECT
			T.TRUCK_NUM,
			T.PUMP_NUM,
			T.OTHER_FACIL,
			T.IS_PROFESS_TEAM,
			T.TERM_USER_NUM,
			T.IS_FUNDS,
			T.YEAR_FUNDS,
			T.FILLING_DATE,
			T.FILLING_USER,
			T.MOBILE_PHONE,
			T.IS_VALID,
			T.CREATOR,
			T.CREATE_TIME,
			T.UPDATOR,
			T.UPDATE_TIME,
			T.UUID,
			T.RE_ORG_CODE,
			T.REGION_NAME,
			T.ORG_CODE,
			T.TOILET_NUM
		FROM
			T_RES_TOILET_EQUIP T
			WHERE
		  UUID= #{uuid,jdbcType=VARCHAR}
	</select>

	<!-- 删除 -->
	<delete id="delete" parameterType="cn.ffcs.dcl.mybatis.domain.restoilet.ToiletEquip">
		UPDATE
			T_RES_TOILET_EQUIP
		SET IS_VALID = '0', UPDATE_TIME = SYSDATE, UPDATOR = #{updator,jdbcType=DECIMAL}
		WHERE
		  UUID= #{uuid,jdbcType=VARCHAR}
	</delete>

	<!-- 详情 -->
	<select id="searchByIdGetId" parameterType="java.lang.String"  resultMap="BaseResultMap">
		SELECT
			T.RES_TOILET_EQUIP_ID
		FROM
			T_RES_TOILET_EQUIP T
			WHERE
		  UUID= #{uuid,jdbcType=VARCHAR}
	</select>

</mapper>